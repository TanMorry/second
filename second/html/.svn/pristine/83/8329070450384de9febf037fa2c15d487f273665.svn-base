<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta name="format-detection" content="telephone=no"/>
<title>喵</title>
<link href="../css/global.css" rel="stylesheet" type="text/css">
<link href="../css/public.css" rel="stylesheet" type="text/css">
<link href="../css/shop-cart-edit.css" rel="stylesheet" type="text/css">
<style type="text/css"></style>
<script src="../js/jquery-2.2.4.min.js"></script>
<script src="../js/miao-Dialog.js"></script>
<script>
$().ready(function() {
	/*还有未打分的评价*/
    $('.eva .eva-btn-c ').click(function(){
        $(this).parents().find('.eva-btn-c').removeClass('eva-btn-bf')
        $(this).addClass('eva-btn-bf')
    })
    $('.eva-service>p span').click(function(){
    	if( $(this).parents('.eva-service').hasClass('eva-border') ){
	        $(this).addClass('eva-service-bg');
	        $(this).prevAll('span').addClass('eva-service-bg');
	        $(this).nextAll('span').removeClass('eva-service-bg')
    	}
    })
    $('.eva_bottom .eva-bottom-btn1 ').click(function(){
        $(this).toggleClass('eva-btn1')
    });
    
    
    /*提交评价逻辑*/
   	var phone = $('#cpp').MiaoDialog();
	var phone2 = $('#cpp2').MiaoDialog();
	$('.eva_bottom').on('click','.eva-bottom-btn3',function(){
		if( 
			$(this).parents('.eva').find('.eva-service').find('p').eq(0).find('span').eq(0).hasClass('eva-service-bg') &&
			$(this).parents('.eva').find('.eva-service').find('p').eq(1).find('span').eq(0).hasClass('eva-service-bg') &&
			$(this).parents('.eva').find('.eva-service').find('p').eq(2).find('span').eq(0).hasClass('eva-service-bg') &&
			$(this).parents('.eva').find('.eva-service').find('p').eq(3).find('span').eq(0).hasClass('eva-service-bg')
		)
		{

			accessSuccess( $(this).parents('.eva') );
		}
		else{
			phone2.MiaoDialog('open'); 
			$('#cpp2').find('p').text('有未评价的选项');
			setTimeout(function(){
				phone2.MiaoDialog('close'); 
			},1400);
		}
		
		return false;
	});
	$('.miao-shade').on('click',function(event) {
		phone.MiaoDialog('close');
		phone2.MiaoDialog('close');
	});
	
	function accessSuccess( $a ){
		var access;
		if( $a.find('.eva-btn-one').eq(0).find('span').eq(1).hasClass('eva-btn-bf') ){
			access = 1;
		}
		else if( $a.find('.eva-btn-one').eq(1).find('span').eq(1).hasClass('eva-btn-bf') ){
			access = 2;
		}
		else if( $a.find('.eva-btn-one').eq(2).find('span').eq(1).hasClass('eva-btn-bf') ){
			access = 3;
		}
		else{
			alert('报错：未选择好中差评');
		}
		if( access == 1 ){
			$a.find('.eva-btn-one').eq(0).find('span').eq(1).hide();
			$a.find('.eva-btn-one').eq(1).hide();
			$a.find('.eva-btn-one').eq(2).hide();
		}
		else if( access == 2 ){
			$a.find('.eva-btn-one').eq(1).find('span').eq(1).hide();
			$a.find('.eva-btn-one').eq(0).hide();
			$a.find('.eva-btn-one').eq(2).hide();
		}
		else if( access == 3 ){
			$a.find('.eva-btn-one').eq(2).find('span').eq(1).hide();
			$a.find('.eva-btn-one').eq(0).hide();
			$a.find('.eva-btn-one').eq(1).hide();
		}
		$a.find('textarea').attr('readonly','readonly');
		if( $a.find('textarea').text() == '' ){
			$a.find('textarea').text('默认评价');
		}
		$a.find('.eva-service').removeClass('eva-border');
		$a.find('.eva-service').find('span').each(function(){
			if( !$(this).hasClass('eva-service-bg') ){
				$(this).hide();
			}
		});
		$a.find('.eva_bottom').hide();
		phone.MiaoDialog('open');
	};
}); 
    </script>
</head>
<body>
<!-- 首页 -->
<section class="flex ">
    <section class="header">
        <div class="header-bg normal">
            <div class="header-l"><a href="#"></a></div>
            <div class="header-c header-dz ">发表评论</div>
            <div class="header-r"><a href="#"></a> </div>
        </div>
    </section>
	<!-- 主体 -->
	<section class="content flex content-cancel">
		<div class="eva clearfix">
	    	<div class="eva-top eva-border">社团：第三空间</div>
	    	<div class="eva-click clearfix  eva-border">
	        	<div class="eva-click-l">
	                <img src="../img/touxiang.png">
	            </div>
	            <div class="eva-click-r">
	                <div class="eva-click-btn">评价：</div>
	                <div class="eva-btn">
	                    <p class="eva-btn-one ">
	                        <span class="eva-btn-l btn-1"></span>
	                        <span class="eva-btn-r">好评</span>
	                    </p>
	                </div>
	            </div>
	        </div>
	        <div class="eva-input eva-border">
	            <textarea readonly="readonly">默认评价</textarea>
	        </div>
	        <div class="eva-service ">
	            <p class="clearfix"><i>描述相符：</i><span class="eva-service-bg"></span><span class="eva-service-bg"></span><span class="eva-service-bg"></span><span class="eva-service-bg"></span></p>
	            <p class="clearfix"><i>服务态度：</i><span class="eva-service-bg"></span><span class="eva-service-bg"></span><span class="eva-service-bg"></span><span class="eva-service-bg"></span><span class="eva-service-bg"></span></p>
	            <p class="clearfix"><i>发货速度：</i><span class="eva-service-bg"></span><span class="eva-service-bg"></span><span class="eva-service-bg"></span><span class="eva-service-bg"></span></p>
	            <p class="clearfix"><i>物流速度：</i><span class="eva-service-bg"></span><span class="eva-service-bg"></span><span class="eva-service-bg"></span></p>
	        </div>
		</div>
	    <div class="eva clearfix">
	        <div class="eva-top eva-border">社团：第三空间</div>
	        <div class="eva-click clearfix  eva-border">
	            <div class="eva-click-l">
	                <img src="../img/touxiang.png">
	            </div>
	            <div class="eva-click-r">
	                <div class="eva-click-btn">评价：</div>
	                <div class="eva-btn">
	                    <p class="eva-btn-one ">
	                        <span class="eva-btn-l btn-1"></span>
	                        <span class="eva-btn-c eva-btn-bf"></span>
	                        <span class="eva-btn-r">好评</span>
	                    </p>
	                    <p class="eva-btn-one">
	                        <span class="eva-btn-l btn-2"></span>
	                        <span class="eva-btn-c "></span>
	                        <span class="eva-btn-r">中评</span>
	                    </p>
	                    <p class="eva-btn-one">
	                        <span class="eva-btn-l btn-3"></span>
	                        <span class="eva-btn-c"></span>
	                        <span class="eva-btn-r">差评</span>
	                    </p>
	                </div>
	            </div>
	        </div>
	        <div class="eva-input  eva-border">
	            <textarea placeholder="请填写对宝贝的感受吧，对他人帮助很大哦"></textarea>
	        </div>
	        <div class="eva-service eva-border ">
	            <p class="clearfix"><i>描述相符：</i><span></span><span></span><span></span><span></span><span></span></p>
	            <p class="clearfix"><i>服务态度：</i><span></span><span></span><span></span><span></span><span></span></p>
	            <p class="clearfix"><i>发货速度：</i><span></span><span></span><span></span><span></span><span></span></p>
	            <p class="clearfix"><i>物流速度：</i><span></span><span></span><span></span><span></span><span></span></p>
	        </div>
	        <div class="eva_bottom clearfix ">
	            <p>
	                <a href="#" class="eva-bottom-btn1"></a>
	                <a href="#" class="eva-bottom-btn2" >匿名评价</a>
	                <a href="javascript:;" class="eva-bottom-btn3">提交评价</a>
	            </p>
	        </div>
	    </div>
	</section>
	<section class="footer">
	
	</section>
    <div class="confirm-pop-ups font4" id="cpp">
		<p>评价成功！</p>
	</div>
	<div class="confirm-pop-ups font3" id="cpp2">
		<p>&nbsp;</p>
	</div>

</section>
</body>
</html>
